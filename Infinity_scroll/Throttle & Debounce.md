# Throttle, Debounce

> 이벤트 핸들러가 많은 연산(예: 무거운 계산 및 기타 DOM 조작)을 수행(이벤트 핸들러의 과도한 횟수가 발생하는 것)하는 경우에 대한 제약을 걸어 제어할 수 있는 수준으로 이벤트를 발생(그 핸들러를 더 적게 실행하면 빠져 나갈 수 있음)시키는 것을 목표로 하는 기술

디바운스(debounce)와 스로틀(throttle)은 시간이 지남에 따라

함수를 몇번이나 실행 할지를 제어하는 **유사한 기술이지만 서로 다르다**.

디바운스 또는 스로틀은 DOM 이벤트에 함수를 첨부할 때 특히 유용하다.

DOM 이벤트가 얼마나 자주 내보내 질지는 제어하지 않는다.

## Throttle

> 일정 간격으로 한번씩만 실행

이벤트를 일정한 주기마다 발생하도록 하는 기술

예를 들어 Throttle의 설정시간으로 1ms를 주게되면

해당 이벤트는 1ms동안 최대 한번만 발생하게 됨

마지막 함수가 호출된 후 일정 시간이 지나기 전에 다시 호출되지 않도록 하는 것

특성 자체가 실행 횟수에 제한을 거는 것이기 때문에 일반적으로 성능 문제 떄문에 많이 사용됨

스크롤을 올리거나 내릴 때 scroll 이벤트 핸들러 경우에 매우 많이 발생됨

scroll 이벤트가 발생할 때 복잡한 작업을 하도록 설정했다면 매우 빈번히 실행되기에

큰 버퍼링이 걸릴 지도 모른다. 그럴 때 스로틀링을 사용할수 있다.

### 사용 예제

1. 무한 스크롤링 페이지

- 사용자가 `footer`에서 얼마나 떨어져 있는지 확인해야하고 사용자가 맨 아래로 스크롤 했다면 `Ajax`를 통해 더많은 컨텐츠를 요청하여 페이지에 추가해야 한다.
- 디바운싱은 사용자가 스크롤을 멈출때만 이벤트를 발생시키므로 디바운싱보다는 스로틀이 더 적합할수 있다. (사용자가 footer에 도달하기 전에 콘텐츠를 가져와야하기 떄문)
- throttle을 통해 사용자 위치가 얼마나 footer로 부터 떨어져 있는지 항상 확인 가능

## Debounce

> 마지막 한번만 실행

이벤트를 그룹화하여 특정시간이 지난 후 하나의 이벤트만 발생하도록 하는 기술

즉, 순차적 호출을 하나의 그룹으로 "그룹화"할 수 있다.

연이어 호출되는 함수들 중 마지막 함수(또는 제일 처음)만 호출하도록 하는 것

### 사용 예제

1. Resize

- 데스크탑의 브라우저 창 크기를 조정하는 경우에 많은 크기 창 조정 이벤트를 내보낼 수 있다.
- 사용자가 브라우저 크기를 조정하지 않은 최종값에만 관심이 있기에 사용

2. Ajax 요청이 있는 자동완성 양식의 키 누르기

- 요즘 서비스들은 검색어 치자마자 엔터 없이도 결과가 바로바로 나온다.
- 한글자 칠때마다 ajax 요청이 실행됨 이와 같은 낭비는 유료 API를 사용했을떄 문제가됨

## Debounce와 Throttle 차이점

디바운싱과 스로틀의 가장 큰 차이점은 스로틀은 적어도 X 밀리초마다

정기적으로 기능 실행을 보장한다는 것

Debounce는 아무리 많은 이벤트가 발생해도 모두 무시하고 특정 시간사이에

어떤 이벤트도 발생하지 않았을 때 딱 한번만 마지막 이벤트를 발생시키는 기법

따라서 5ms가 지나가기전에 계속 이벤트가 발생할 경우 콜백에 반응하는

이벤트는 발생하지 않고 계속 무시된다.
